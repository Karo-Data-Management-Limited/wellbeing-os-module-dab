{
  "$schema": "https://dataapibuilder.azureedge.net/schemas/v1.5.0/dab.draft.schema.json",
  "data-source": {
    "database-type": "postgresql",
    "connection-string": "@akv('pg-wellbeing-os')"
  },
  "azure-key-vault": {
    "endpoint": "https://wellbeing-os-keyvault.vault.azure.net/",
    "retry-policy": {
      "mode": "exponential",
      "max-count": 5,
      "delay-seconds": 2,
      "max-delay-seconds": 30,
      "network-timeout-seconds": 45
    }
  },
  "runtime": {
    "rest": {
      "path": "/",
      "enabled": true
    },
    "graphql": {
      "enabled": false
    }
  },
  "entities": {
    "dashboard-summary": {
      "source": {
        "type": "view",
        "object": "whanau_ora.mv_dashboard_summary",
        "key-fields": [
          "date_sk",
          "orgid",
          "domain_sk",
          "outcome_area_sk"
        ]
      },
      "rest": {
        "path": "/dashboard-summary",
        "methods": [
          "GET"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "outcomes-summary": {
      "source": {
        "type": "view",
        "object": "whanau_ora.mv_outcomes_summary",
        "key-fields": [
          "date_sk",
          "orgid",
          "outcome_area_sk",
          "status_label"
        ]
      },
      "rest": {
        "path": "/outcomes-summary",
        "methods": [
          "GET"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dashboard-referrals": {
      "source": {
        "type": "view",
        "object": "whanau_ora.fact_referrals_daily",
        "key-fields": [
          "org_sk",
          "date_id",
          "client_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-user": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_user",
        "key-fields": [
          "user_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-client-demographics": {
      "source": {
        "type": "view",
        "object": "whanau_ora.dim_client_demographics",
        "key-fields": [
          "client_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "demographics-summary": {
      "source": {
        "type": "view",
        "object": "whanau_ora.mv_demographics_summary",
        "key-fields": [
          "row_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "fact-actions": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_actions",
        "key-fields": [
          "org_sk",
          "action_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "fact-reviews": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_reviews",
        "key-fields": [
          "org_sk",
          "review_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "fact-user-performance": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_user_performance",
        "key-fields": [
          "org_sk",
          "user_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    }
  }
}